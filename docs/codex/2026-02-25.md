# Codex Log — 2026-02-25

## Session context
- Repo: Dark-Code
- Environment: conda env = darkcode
- Goal: Fate V1 (Streamlit + SQLite)

---

## Task 1
### User prompt (verbatim)
（把你发给 Codex 的指令原样贴在这里）

### Plan (by Codex)
（Codex 说的计划/步骤）

### Changes
- Files changed:
- DB schema changes:
- UI changes:
- Commands run:

### Commits
- SHA:
- Message:

### Notes / Decisions
- (记录关键决策：例如“加权进度条定义”)

### Next
- (下一步要做什么)
Make all visible UI strings use the label system L(key, default) and add missing keys for: Habits section title, Save Habits, Mainline Push title, all form headings (Add/Edit Habit/Line/Quest), messages (No remaining quests), and Yes/No. Extend the UI Labels Editor to include these keys and likely keys.

Plan summary:
- Audited UI strings and defined label keys/defaults.
- Refactored UI to use label system everywhere, including Yes/No and messages.
- Expanded UI Labels Editor with new keys.

Commands run:
- ls
- ls docs/codex
- sed -n '1,200p' PRD_V1.md
- rg -n "L\(|ui_labels|label" src/fate_app src/fate_core
- sed -n '1,220p' src/fate_app/app.py
- sed -n '220,520p' src/fate_app/app.py
- sed -n '160,320p' src/fate_app/app.py
- sed -n '320,460p' src/fate_app/app.py
- rg -n '"[^"\\n]+"' src/fate_app/app.py

Files changed:
- src/fate_app/app.py

Commit SHAs:
- None

Make Evidence Type extensible: allow users to add and delete custom evidence types. Prefer a small DB table evidence_types (id, name, active, sort_order). In "Today", use a selectbox of existing types + a text input to add a new type. Evidence type should be optional; evidence_text and evidence_ref remain required.

Plan summary:
- Added evidence_types table with seed defaults.
- Implemented CRUD helpers for evidence types.
- Updated Today evidence form to add/delete types and save optional evidence type.

Commands run:
- rg -n "evidence" src/fate_core src/fate_app
- sed -n '1,220p' src/fate_core/db.py
- sed -n '1,260p' src/fate_core/crud.py
- sed -n '260,520p' src/fate_core/crud.py
- sed -n '20,120p' src/fate_app/app.py
- sed -n '120,200p' src/fate_app/app.py
- rg -n "EVIDENCE_TYPES|evidence_type_label" src/fate_app/app.py

Files changed:
- src/fate_core/db.py
- src/fate_core/crud.py
- src/fate_app/app.py

Commit SHAs:
- None
